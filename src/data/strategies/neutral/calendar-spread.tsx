import type { Strategy } from '../../../lib/types'

const strategy: Strategy = {
  id: 'calendar-spread',
  name: '日历价差（Calendar Spread）',
  referencePrice: 100,
  tags: ['方向：中性', '波动率：看涨', '时间价值差'],
  summary: '同一执行价、不同到期：通常买远月、卖近月，利用时间价值与Vega差异。',
  description: '日历价差是一种期权策略，你同时买入和卖出相同类型、相同执行价但不同到期日的期权。最常见的做法是买入远月期权，卖出近月期权。这个策略依赖于近月期权时间价值衰减速度快于远月期权，以及隐含波动率的变化。',
  concept: '日历价差就像是租房合同的游戏。你卖出一份短期租约（近月期权）收租金，同时自己签一份长期租约（远月期权）付租金。你的目标是短期租约到期后，如果房客不续租，你还能继续用长期租约住。时间对你有利，因为短期租约的时间价值流失得比长期租约快得多，就像冰淇淋一样，小杯子融化得快，大桶融化得慢。',
  pros: [
    '**时间价值优势**：近月期权时间价值衰减速度快于远月期权，对策略有利。',
    '**波动率敏感**：如果市场波动率上升，远月期权受益更多，可以放大收益。',
    '**风险可控**：最大风险是初始净成本，风险相对有限。',
    '**灵活性高**：可以根据市场情况调整到期日和执行价。',
  ],
  cons: [
    '**波动率风险**：如果波动率下降，对策略不利，可能导致亏损。',
    '**股价敏感**：股价大幅偏离执行价时，策略效果不佳。',
    '**时间管理**：需要密切关注近月期权到期日，管理较为复杂。',
    '**成本较高**：远月期权通常比近月期权贵，初始成本相对较高。',
  ],
  example: (
    <div>
      <p>假设某股票现价100元，你预期短期内股价会相对稳定，但波动率可能上升。于是你建立了一个日历价差：</p>
      <ul>
        <li>卖出1张下月到期、执行价100元的看涨期权，收入2元（共200元）。</li>
        <li>买入1张6个月后到期、执行价100元的看涨期权，支付4元（共400元）。</li>
      </ul>
      <p>你的净成本为 <strong>200元</strong>（400元 - 200元），这是你的最大潜在亏损。</p>
      <p><strong>情景一：股价到期时接近100元（理想情况）</strong></p>
      <p>近月期权到期时价值接近0，你卖出的期权成为废纸。远月期权仍保留较多时间价值，如果波动率上升，价值可能超过4元。你的利润取决于远月期权的价值变化。</p>
      <p><strong>情景二：股价大幅上涨至120元</strong></p>
      <p>近月期权到期时价值20元，你买入的远月期权价值也相应上升，但由于时间价值损耗，你的净亏损可能接近初始成本200元。</p>
      <p><strong>情景三：股价大幅下跌至80元</strong></p>
      <p>类似上涨情况，所有期权价值下降，你的净亏损接近初始成本200元。</p>
    </div>
  ),
  formula: [
    '净成本 = 远月期权价格 - 近月期权价格',
    '最大风险 = 净成本',
    '潜在收益 = 远月期权价值变化 - 净成本',
    '盈亏平衡点 = 执行价（理论上股价应在此附近）',
  ],
  legs: [
    { id: 'sc_near', kind: 'option', position: 'short', qty: 1, multiplier: 100, entryPrice: 2, option: { type: 'call', strike: 100 } },
    { id: 'lc_far', kind: 'option', position: 'long', qty: 1, multiplier: 100, entryPrice: 4, option: { type: 'call', strike: 100 } },
  ],
}

export default strategy
