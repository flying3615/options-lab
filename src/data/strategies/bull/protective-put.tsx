import type { Strategy } from '../../../lib/types';

const strategy: Strategy = {
  id: 'protective-put',
  name: '保护性看跌期权 (Protective Put)',
  referencePrice: 100,
  tags: ['持仓管理', '支付权利金', '风险：有限', '新手入门'],
  summary: '此策略完全等同于为你的股票持仓购买一份保险。通过买入一份看跌期权，你可以保护你的股票免受价格大幅下跌的影响，从而锁定最大亏损。',
  description: '保护性看跌（Protective Put）是一种经典的对冲策略。当投资者持有一支股票，但担心短期内可能出现回调或黑天鹅事件时，可以买入一份看跌期权来保护这个头寸。这份期权就像一份保险单，它保证了无论股价跌到多低，你都有权以一个预设的、较高的价格（执行价）卖出你的股票。',
  concept: '这和购买汽车保险的逻辑一模一样。你拥有一辆车（100股股票），你担心发生车祸（股价暴跌）。于是你每年向保险公司支付一笔保费（权利金），购买一份保险合同（看跌期权）。如果平安无事（股价上涨或平盘），你就损失了这笔保费。但如果真的发生严重车祸（股价暴跌），保险公司会赔付你的大部分损失，让你不至于血本无归。你用一笔小额的、确定的成本（权利金），消除了未来巨大的、不确定的下行风险。',
  pros: [
    '**风险兜底**：完全锁定了你的最大亏损，让你在面对市场不确定性时能安心持股。',
    '**保留上涨潜力**：与直接卖出股票不同，如果股价继续上涨，你仍然能享受到所有的上行收益（只是要减去保费成本）。',
    '**简单有效**：是所有对冲策略中最简单、最直接的一种。'
  ],
  cons: [
    '**成本拖累**：购买保险需要持续支付保费。如果股价长期盘整或上涨，这些保费会不断侵蚀你的总利润，降低你的投资回报率。',
    '**可能浪费**：如果预期的下跌没有发生，你支付的权利金就“浪费”了（就像一年没出车祸，车险白交了）。'
  ],
  risks: ['隐含波动率上升时成本更高', '择时不当造成保费浪费'],
  example: (
    <div>
      <p>假设你持有100股D公司的股票，成本为每股$100。你对公司长期看好，但担心下周的财报可能导致股价短期下跌。于是你买入一张执行价为$95、一个月后到期的看跌期权作为保险，支付了$3/股的权利金（共$300）。</p>
      <p><strong>情景一：股价到期时上涨至$110</strong></p>
      <p>你的担心没有发生。保险（期权）没有用上，过期作废，你损失了$300的保费。但你的股票获得了 ($110 - $100) * 100 = $1000 的收益。你的净收益 = $1000 - $300 = $700。</p>
      <p><strong>情景二：股价到期时暴跌至$80</strong></p>
      <p>保险派上了大用场！你可以行权，以$95的价格卖出你那市价仅为$80的股票。如果没有保险，你会亏损 ($100 - $80) * 100 = $2000。有了保险，你的亏损被锁定在 (成本价 - 执行价) * 100 + 保费 = ($100 - $95) * 100 + $300 = $500 + $300 = $800。你用$300的保费，避免了$1200的额外损失。</p>
      <p><strong>盈亏平衡点</strong></p>
      <p>要实现不亏不赚，股价需要涨到“你的持股成本 + 你支付的保费”，即 <em>$100 + $3 = $103</em>。</p>
    </div>
  ),
  formula: [
    '最大亏损 ≈ (股票成本 - 看跌执行价) × 股数 + 看跌保费 × 合约乘数',
    '盈亏平衡点 ≈ 股票成本 + 每股看跌保费'
  ],
  stepNotes: [
    'Step 1：持有股票，线性暴露。',
    'Step 2：买入看跌，曲线下方被“托住”，下行亏损受限，但整体曲线下移（支付保费）。'
  ],
  legs: [
    { id: 'stock', kind: 'stock', position: 'long', qty: 100, entryPrice: 100 },
    { id: 'long-put', kind: 'option', position: 'long', qty: 1, multiplier: 100, entryPrice: 3, option: { type: 'put', strike: 95 } },
  ],
}

export default strategy
